<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Language" content="ja" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>AKABANA - S2Factory - FDS2</title>
<link rel="stylesheet" type="text/css" href="http://www.seasar.org/theme/main.css" media="screen,projection" />
<link rel="stylesheet" type="text/css" href="http://www.seasar.org/theme/print.css" media="print" />
<link href="./css/maven-base.css" type="text/css" rel="stylesheet" media="screen" />
<link href="./css/maven-theme.css" type="text/css" rel="stylesheet" media="screen" />
</head>
<body>
<div id="wrapper">
  <div id="header">
    <div class="line"><span class="hide">spacer</span></div>
    <div id="logo">
      <h1 id="h01" class="hide">The Seasar Foundation Project Site</h1>
      <img align="LEFT" alt="The Seasar Foundation" src="images/logo-rc1.png"  /><img align="RIGHT"  alt="Akabana Project" height="110" src="images/seasar-logo.png" width="254"/></div>
    <div id="tool">      <!--
<h2><a href="http://search.seasar.org/">Site Search</a></h2>

<form id="search" action="http://search.seasar.org/">
<div>
	<input id="search_phrase" type="text" name="phrase" size="20" />
	<input type="hidden" name="perpage" value="30" />
	<input type="hidden" name="enc" value="UTF-8" />
	<input id="search_go" type="submit" value="Search" />
</div>
</form>

<h2>Seasar Banner</h2>

<p><a href="http://www.seasar.org/images/seasar_banner.gif"><img src="http://www.seasar.org/images/seasar_banner.gif" alt="Seasar Banner" title="Seasar Banner" width="146" height="33" /></a></p>
-->
    </div>
    <div id="navi">
      <p><a href="../en/">English</a> | <a href="../ja/">Japanese</a></p>
    </div>
  </div>
  <!-- header -->
    <div id="contents_left">
    <h2>Menu</h2>
    <ul>
      <li class="none"> <strong>Introduction</strong> </li>
      <li class="none"> <a href="downloads/">Download</a> </li>
      <li class="none"> <a href="#">Tutorials</a> </li>
      <li class="none"> <a href="#">Examples</a> </li>
      <li class="none"> <a href="#">User's Guide</a> </li>
      <li class="none"> <a href="#">Development's Guide</a> </li>
      <li class="none"> <a href="#">API Javadoc</a> </li>
      <li class="none"> <a href="#">FAQ</a> </li>
    </ul>
    <h2>プロジェクト文書</h2>
    <ul>
      <li class="expanded"> <a href="project-info.html">プロジェクト情報</a>
        <ul>
          <li class="none"> <strong>このプロジェクトについて</strong> </li>
          <li class="none"> <a href="source-repository.html">ソースリポジトリ</a> </li>
          <li class="none"> <a href="project-summary.html">プロジェクトサマリ</a> </li>
          <li class="none"> <a href="team-list.html">プロジェクトチーム</a> </li>
          <li class="none"> <a href="license.html">プロジェクトライセンス</a> </li>
          <li class="none"> <a href="mail-lists.html">メーリングリスト</a> </li>
          <li class="none"> <a href="dependencies.html">依存関係</a> </li>
          <li class="none"> <a href="issue-tracking.html">課題追跡</a> </li>
          <li class="none"> <a href="integration.html">継続的結合</a> </li>
        </ul>
      </li>
    </ul>
    <a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy" name="poweredBy"> <img alt="Built by Maven" src="./images/logos/maven-feather.png" /> </a> </div>
  <!-- contents_left -->
  <div id="contents_center">
    <div id="article">
      <div class="section">
        <h1>S2Factory for FDS2</h1>
        
        <p>akabana.S2Factory for FDS2akabanaはFDS2からS2Containerに登録されたコンポーネントを呼び出すことを可能にする、Factoryです。</p>
           * Overview
FDS2 s2Factoryは、fds2(Flex Data Services 2)と、DIxAOPコンテナであるSeasar2を結ぶ
Factoryです。
FDS2で用意されているFactory Mechanismを利用してS2Flex2の処理部分を呼び出します。

flex.messaging.FlexFactoryを実装したRemotingServiceInvokerを用意することで
FDS2からs2flex2のロジック呼び出しを可能にしています。

    * Features
	・FDS 2の設定ファイルに記述されたserviceをもとにS2Containerに登録されているコンポーネントを呼び出します。
　　　　・RemotingService(meta/Annotation)の有無による呼び出しコンポーネントの制限
　　　　・アノテーションによるSessionからデータのimport,SessionへのデータExportをサポート

    * Download
	　akabanaのサイトよりdownloadすることができます。
　　　　　また、ソースリポジトリより最新のものをチェックアウトすることも可能です。

    * Prerequisites
　　　　　FDS s2Factoryは以下のものに依存します。
　　　・Flex Data Services2
      ・S2Flex2
      ・S2 Container2 2.4

         その他S2Flex2/S2Containerで必要なものを一緒にdeployする必要があります。

    * Install
　　　FDS用のS2Factoryをインストールするには

　　　jarの配置
aopalliance-1.0.jar
geronimo-jta_1.0.1B_spec-1.0.jar
javassist-3.0.jar
log4j-1.2.13.jar
ognl-2.6.7.jar
s2-extension-2.4.0-rc-1.jar
s2-fds-s2factory-b1.jar
s2-framework-2.4.0-rc-1.jar

　　　web.xmlの更新
　　    <servlet>
        <servlet-name>s2servlet</servlet-name>
        <servlet-class>org.seasar.framework.container.servlet.S2ContainerServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    　　</servlet>

　    <servlet-mapping>
        <servlet-name>s2servlet</servlet-name>
        <url-pattern>/s2servlet</url-pattern>
　    </servlet-mapping>
    
	<filter>
		<filter-name>s2filter</filter-name>
		<filter-class>org.seasar.framework.container.filter.S2ContainerFilter</filter-class>
	</filter>

	<filter-mapping>
		<filter-name>s2filter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

　　　

　　　　factoryを利用する設定(services-config.xml)
        services-config.xmlに以下の設定を追加します。

　　　　追加する場所は、<services-config>タグの下になります。

        <factories>
		<factory id="s2" class="org.seasar.flex2.rpc.remoting.service.fds2.factory.Seasar2Factory" />
	</factories>
　　　　
　　　　　　　　上記の2ファイルの記述例をresources以下にサンプルとして用意しています。

    * Usage

　　　　remoting-config.xml
        Flexクライアントから呼び出すserviceの設定を追加します。
　　　　以下はaddServiceというサービスを設定する場合の例です。
　　　　<destination id="addService">
        <properties>
			<factory>s2</factory>
        </properties>
   　　 </destination>
        
        factoryタグにservices-config.xmlで指定したFactoryのIDを指定します。

    *remotingServiceを使ったServiceの呼び出し制限
　　　S2flex2同様Flex2 クライアントから呼び出すことのできるServiceコンポーネントを制限することができます。
　　　FDS2では、設定されたコンポーネント以外は呼び出すことができない
　　　S2Flex2を通じてS2Containerに登録されたコンポーネントを呼び出す際には、
　　　RemotingServiceが設定されていなければなりません。
　　　　RemotingServiceは以下の方法で登録することが可能です。

　　　　　・Metaタグ
　　　　　・Annotation(JDK5.0のみ)
     どちらも登録されていないときには、Flexクライアントから呼び出すことができません。
　　 これは、FDS2のremoting-config.xmlに定義されていても同様です。
       
      </div>
      
    </div>
    <!-- article -->
  </div>
  <!-- contents_center -->
  <div id="footer">
    <address>
&copy; Copyright 2006, The Seasar Foundation and the others. All rights reserved.
    </address>
    <div class="line"><span class="hide">spacer</span></div>
  </div>
  <!-- footer -->
</div>
<!-- wrapper -->
</body>
</html>
