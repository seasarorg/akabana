<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE components PUBLIC "-//SEASAR2.1//DTD S2Container//EN"
	"http://www.seasar.org/dtd/components21.dtd">
<components>
	<include path="convention.dicon"/>
	<include path="remoting_message_mock.dicon" />
	<include path="s2ana.dicon" />

	<!--
		Authentication
	-->
    <component
    	class="org.seasar.flex2.rpc.remoting.security.impl.RemotingServicePrincipalImpl"
    />
    <component
    	class="org.seasar.flex2.rpc.remoting.security.factory.impl.RemotingServicePrincipalFactoryImpl"
    />

    <component
        name="authenticationContext"
        class="org.seasar.flex2.rpc.remoting.security.authentication.impl.RemotingServiceAuthenticationContextImpl"
    >
    	<property name="storage">
    		<component
    			class="org.seasar.flex2.rpc.remoting.security.impl.RemotingServicePrincipalSessionStorageImpl"
    		/>
    	</property>
    	<initMethod name="configRealm">
	    	<arg>
				<component
			    	class="org.seasar.flex2.rpc.remoting.security.realm.impl.HashMapRealmImpl"
			   	>
			   		<property name="userMap">
			   			<component class="java.util.HashMap" >
			   				<initMethod name="put">
			   					<arg>"admin"</arg>
			   					<arg>"adminpass"</arg>
			   				</initMethod>
			   			</component>
			   		</property>
			   		<property name="userRoleMap">
			   			<component class="java.util.HashMap" >
			   				<initMethod name="put">
			   					<arg>"admin"</arg>
			   					<arg>"adminrole"</arg>
			   				</initMethod>
			   			</component>
			   		</property>
			   	</component>
		   	</arg>
    	</initMethod>
    </component>

	<!--
		Authorization
	-->
	<component
		class="org.seasar.framework.container.autoregister.AspectAutoRegister"
	>
	  	<property name="interceptor">s2ana.requireLogin</property>
	    <initMethod name="addClassPattern">
	        <arg>"org.seasar.flex2.rpc.remoting.security"</arg>
	        <arg>".*Test"</arg>
	    </initMethod>
	</component>
</components>